<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Invitaci√≥n Ailany ‚Äî Mis V A√±os</title>
<link href="https://fonts.googleapis.com/css2?family=Castoro+Script&family=Montserrat:wght@300;500;700&display=swap" rel="stylesheet">
<style>
  :root{
    --bg1:#FDECF0; --bg2:#FFEFF2;
    --neon-pink:#ff5aa7; --neon-rose:#ff2e9e; --gold:#EBC48A;
    --glass: rgba(255,255,255,0.08);
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family:'Montserrat',sans-serif;background:linear-gradient(180deg,var(--bg1),var(--bg2));color:#231; -webkit-font-smoothing:antialiased}
  .wrap{max-width:920px;margin:0 auto;padding:18px;}
  /* ---------- CASTILLO NEON ---------- */
  #castle-wrap{perspective:1600px;display:flex;justify-content:center;align-items:center;height:330px;position:relative;pointer-events:auto}
  .castle{
    width:320px;height:260px;position:relative;transform-style:preserve-3d;border-radius:14px;
    background:linear-gradient(180deg,#FFD7E8,#FFEAF2); border:3px solid rgba(255,90,167,0.12);
    box-shadow:0 8px 30px rgba(255,90,167,0.08), inset 0 -20px 40px rgba(255,255,255,0.15);
    overflow:visible;
  }
  /* towers */
  .tower{position:absolute;width:80px;height:160px;top:-80px; background:linear-gradient(180deg,#FFD1E8,#FFB6DB); border-radius:10px; box-shadow:0 6px 22px rgba(255,45,158,0.14); transform-origin:center}
  .tower.left{left:-36px; transform:rotateY(15deg) translateZ(-10px)}
  .tower.right{right:-36px; transform:rotateY(-15deg) translateZ(-10px)}
  .roof{position:absolute;top:-110px;left:50%;transform:translateX(-50%);width:120px;height:60px;background:linear-gradient(180deg,#FFB6D0,#FF95C8);border-radius:8px 8px 0 0;box-shadow:0 6px 18px rgba(255,45,158,0.12)}
  /* neon lines */
  .neon-line{position:absolute;height:4px;width:70%;left:15%;top:20px;background:transparent;box-shadow:0 0 10px var(--neon-pink);border-radius:4px;opacity:0.9;}
  .neon-dot{position:absolute;width:12px;height:12px;border-radius:50%;background:var(--neon-rose);box-shadow:0 0 16px var(--neon-rose),0 0 30px var(--neon-pink)}
  .nd1{left:18px;top:8px}.nd2{right:18px;top:8px}.nd3{left:48%;top:40px}
  /* puerta */
  #castle-door{width:120px;height:160px;background:linear-gradient(180deg,#7C4331,#A35A3E);border-radius:10px;margin:0 auto;position:relative;top:70px;cursor:pointer;transform-origin:left center;box-shadow:0 8px 24px rgba(0,0,0,0.25),0 0 32px rgba(255,90,167,0.12)}
  #castle-door:after{content:"";position:absolute;right:10px;top:18px;width:16px;height:16px;border-radius:50%;background:#FFDAB3;box-shadow:0 0 10px #FFDAB3}
  /* door open state handled in JS via transform */
  /* ---------- INITIAL TEXT ---------- */
  #initial-text{font-family:'Castoro Script',cursive;font-size:34px;color:var(--neon-pink);text-align:center;margin-top:14px;opacity:0;transition:opacity .8s, transform .8s}
  #initial-text.visible{opacity:1; transform:translateY(-6px)}
  .neon-3d{ text-shadow:0 0 6px #fff, 0 0 14px var(--neon-pink), 0 0 26px var(--neon-rose);}

/* ---------- MAIN CARD ---------- */
#main-content{margin-top:18px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); padding:18px;border-radius:14px;backdrop-filter: blur(6px); box-shadow:0 8px 30px rgba(0,0,0,0.06); display:none; position:relative; overflow:hidden}
.header{position:relative;padding:16px 8px}
.title{font-family:'Castoro Script',cursive;font-size:42px;margin:6px 0;color:#ffeef7; text-align:center; cursor:pointer}
.title .shine{display:block;font-size:14px;color:rgba(255,255,255,0.6); margin-top:-6px}
.name{font-family:'Castoro Script',cursive;font-size:56px;margin:0;color:#fff;text-align:center; text-shadow:0 6px 22px rgba(0,0,0,0.25), 0 0 18px rgba(255,200,210,0.18)}
/* metallic look for titles */
.title, .name{background:linear-gradient(90deg,#FFDDE6,#FFE9F0 50%,#FFE5D5); -webkit-background-clip:text; background-clip:text; color:transparent}

/* crown SVG container centered above name */
#crown-main{width:140px;height:80px;margin:6px auto;display:flex;align-items:center;justify-content:center;transform-origin:center;animation:crownFloat 6s ease-in-out infinite}
@keyframes crownFloat{0%{transform:translateY(0) rotateX(0)}50%{transform:translateY(-8px) rotateX(2deg)}100%{transform:translateY(0)}}

/* background halo */
.halo{position:absolute;left:50%;top:10%;transform:translateX(-50%);width:80%;height:260px;border-radius:50%; background: radial-gradient(circle at 50% 40%, rgba(255,182,193,0.22), rgba(255,182,193,0.06) 50%, transparent 60%);filter:blur(24px);pointer-events:none;}

/* countdown */
#countdown{font-weight:700;font-size:18px;text-align:center;margin:10px 0;color:#3b2430;text-shadow:0 0 6px rgba(255,90,167,0.08)}

/* info blocks */
.info-grid{display:grid;grid-template-columns:1fr;gap:10px;margin:12px 0}
.info-card{background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.03)}
.info-card p{margin:6px 0;color:#3b2430}
.link-btn{display:inline-block;padding:8px 12px;background:linear-gradient(90deg,var(--neon-pink),var(--neon-rose));color:#fff;border-radius:10px;text-decoration:none;font-weight:600}

/* gifts */
#gifts ul{list-style: none;padding-left:0; text-align:left}
#gifts li{margin:6px 0;padding-left:14px; position:relative}
#gifts li:before{content:"üéÅ";position:absolute;left:0}

/* RSVP */
#rsvp form{display:flex;flex-direction:column;gap:8px;align-items:center;margin-top:6px}
#rsvp input[type="text"], #rsvp input[type="number"]{padding:8px;border-radius:8px;border:1px solid rgba(0,0,0,0.06);width:80%;max-width:360px}
#rsvp button{padding:10px 14px;border-radius:10px;border:none;background:linear-gradient(90deg,var(--neon-pink),var(--neon-rose));color:#fff;font-weight:700;cursor:pointer}
#rsvp .btn-secondary{background:transparent;border:1px solid rgba(0,0,0,0.06);color:#333}

/* photos button */
#photos .btn{margin-top:10px}

/* floating crowns and particles */
.floating-crown{position:absolute;opacity:0.85;pointer-events:none;filter:drop-shadow(0 6px 12px rgba(255,90,167,0.12));transition:transform .2s linear}
.particle{position:absolute;border-radius:50%;pointer-events:none;opacity:0.95;mix-blend-mode:screen}

/* admin panel */
#admin-panel{position:fixed;right:12px;top:12px;background:#fff;padding:10px;border-radius:10px;box-shadow:0 8px 30px rgba(0,0,0,0.12);display:none;z-index:9999;color:#111}
#admin-panel h4{margin:0 0 8px 0}

/* responsive */
@media(min-width:720px){
  .info-grid{grid-template-columns:1fr 1fr}
}
</style>
</head>
<body>
<div class="wrap">

  <!-- CASTILLO NEON -->
  <div id="castle-wrap">
    <div class="castle" id="castle">
      <div class="tower left"></div>
      <div class="tower right"></div>
      <div class="roof"></div>
      <div class="neon-line" style="top:18px"></div>
      <div class="neon-dot nd1"></div>
      <div class="neon-dot nd2"></div>
      <div class="neon-dot nd3"></div>
      <div id="castle-door" aria-label="Puerta interactiva"></div>
    </div>
  </div>

  <!-- Texto inicial typewriter -->
  <div id="initial-text" aria-live="polite">¬°Te invito a mi fiesta!</div>

  <!-- MAIN CONTENT (oculto hasta abrir puerta) -->
  <div id="main-content">
    <div class="halo"></div>
    <div class="header">
      <div class="title neon-3d" id="title">Mis V A√±os <span class="shine">‚Äî Fiesta de Ailany</span></div>
      <div class="name" id="name">Ailany</div>

      <!-- corona principal (SVG) -->
      <div id="crown-main" aria-hidden="true">
        <!-- simple stylized crown SVG -->
        <svg id="svg-crown" width="140" height="80" viewBox="0 0 140 80" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <linearGradient id="g1" x1="0" x2="1">
              <stop offset="0" stop-color="#FFD7D6"/>
              <stop offset="1" stop-color="#FFB6E0"/>
            </linearGradient>
            <radialGradient id="gem" cx="50%" cy="30%" r="60%">
              <stop offset="0" stop-color="#fff"/>
              <stop offset="1" stop-color="#FF9AC9"/>
            </radialGradient>
          </defs>
          <g id="crown-shape" transform="translate(0,6)">
            <path d="M8 60 L28 28 L48 54 L70 20 L92 54 L112 28 L132 60 Z" fill="url(#g1)" stroke="#FFC1E0" stroke-width="2" />
            <circle cx="28" cy="28" r="6" fill="url(#gem)"/>
            <circle cx="70" cy="20" r="7" fill="url(#gem)"/>
            <circle cx="112" cy="28" r="6" fill="url(#gem)"/>
          </g>
        </svg>
      </div>
    </div>

    <div id="countdown" aria-live="polite">‚è≥ Cargando cuenta regresiva...</div>

    <!-- Event info -->
    <div class="info-grid">
      <div class="info-card">
        <h3>üìñ Ceremonia religiosa</h3>
        <p><strong>Fecha:</strong> 23 de noviembre 2025</p>
        <p><strong>Hora:</strong> 1:00 PM</p>
        <p><strong>Lugar:</strong> Iglesia del Santo Entierro o Santo Sepulcro</p>
        <a class="link-btn" href="https://maps.app.goo.gl/MESG66t5392Zncfm8" target="_blank" rel="noopener">Ver ubicaci√≥n</a>
      </div>

      <div class="info-card">
        <h3>üéâ Recepci√≥n</h3>
        <p><strong>Fecha:</strong> 23 de noviembre 2025</p>
        <p><strong>Hora:</strong> 4:00 PM</p>
        <p><strong>Lugar:</strong> Sal√≥n Jard√≠n Joss Mary</p>
        <a class="link-btn" href="https://maps.app.goo.gl/Uw6MZtHp4LnNYkwTA" target="_blank" rel="noopener">Ver ubicaci√≥n</a>
      </div>
    </div>

    <div class="info-grid">
      <div class="info-card">
        <h3>üëß Entretenimiento</h3>
        <p>üé® Pintacaritas: 4:30 PM</p>
        <p>ü§° Show del payaso: 7:00 PM</p>
      </div>

      <div class="info-card" id="gifts">
        <h3>üéÅ Sugerencias de regalo</h3>
        <ul>
          <li>Ropa - talla 8</li>
          <li>Zapatos / tennis - #18</li>
          <li>Mu√±ecas, pintura, rompecabezas, memoramas</li>
          <li>Domin√≥, juegos de t√© y cocina</li>
          <li>Libros para colorear o cuentos interactivos</li>
          <li>Si tu regalo es dinero, lo agradecer√©; ser√° para mi alcanc√≠a üíñ</li>
        </ul>
      </div>
    </div>

    <!-- RSVP -->
    <div id="rsvp" class="info-card" style="margin-top:12px;">
      <h3>‚úÖ Confirma tu asistencia</h3>
      <form id="rsvp-form" autocomplete="off">
        <input name="name" type="text" placeholder="Nombre (m√≠n 3 letras)" required minlength="3" />
        <input name="guests" type="number" placeholder="Total personas (m√°x 3)" required min="1" max="3" />
        <div style="display:flex;gap:8px;justify-content:center">
          <button type="submit">Confirmar</button>
          <button type="button" class="btn-secondary" id="no-attend">No asistir√©</button>
        </div>
      </form>
    </div>

    <!-- Photos -->
    <div id="photos" class="info-card">
      <h3>üì∏ Recordatorio de fotos</h3>
      <p>No se te olvide tomar fotos en mi fiesta heee</p>
      <button id="photo-reminder" class="btn">Agregar recordatorio al calendario</button>
      <div style="margin-top:8px;font-size:13px;color:#333">Tambi√©n puedes subir fotos luego (funci√≥n disponible)</div>
    </div>

  </div> <!-- end main-content -->

</div> <!-- end wrap -->

<!-- admin panel -->
<div id="admin-panel">
  <h4>Panel Admin</h4>
  <div id="admin-list">No hay confirmaciones a√∫n</div>
  <button id="export-csv">Exportar CSV</button>
</div>

<!-- audio (pon golden_spanish.mp3 en la misma carpeta si quieres sonido) -->
<audio id="bg-audio" src="golden_spanish.mp3" preload="auto"></audio>

<script>
/* ---------- Helpers & state ---------- */
const door = document.getElementById('castle-door');
const initialText = document.getElementById('initial-text');
const mainContent = document.getElementById('main-content');
const audio = document.getElementById('bg-audio');
const title = document.getElementById('title');
const nameEl = document.getElementById('name');
const countdownEl = document.getElementById('countdown');
const adminPanel = document.getElementById('admin-panel');
const adminList = document.getElementById('admin-list');

let confirmations = []; // almacenar√° objetos {name, guests, date}

/* ---------- Particles & floating crowns (SVG clones) ---------- */
const particleCount = 40;
for(let i=0;i<particleCount;i++){
  const p = document.createElement('div');
  p.className='particle';
  const size = 4 + Math.random()*8;
  p.style.width = p.style.height = size + 'px';
  p.style.left = Math.random()*window.innerWidth + 'px';
  p.style.top = Math.random()*window.innerHeight + 'px';
  p.style.background = `radial-gradient(circle,#fff, ${i%2? 'rgba(255,150,200,0.6)':'rgba(255,200,240,0.5)'})`;
  document.body.appendChild(p);
}
/* floating crowns as small svg clones */
const crownSVG = document.getElementById('svg-crown').outerHTML;
const crownCount = 12;
const floating = [];
for(let i=0;i<crownCount;i++){
  const el = document.createElement('div');
  el.className = 'floating-crown';
  const s = 24 + Math.random()*46;
  el.style.width = s+'px'; el.style.height = (s*0.6)+'px';
  el.style.left = Math.random()*(window.innerWidth-60)+'px';
  el.style.top = Math.random()*window.innerHeight+'px';
  el.style.opacity = 0.25 + Math.random()*0.6;
  el.innerHTML = crownSVG;
  document.body.appendChild(el);
  floating.push({el, speed:0.2 + Math.random()*0.6});
}
function animateFloating(){ floating.forEach(f=>{ let t = parseFloat(f.el.style.top); t += f.speed; if(t > window.innerHeight+60) t = -60; f.el.style.top = t+'px'; f.el.style.transform = `rotate(${Math.sin(t/60)*8}deg)`; }); requestAnimationFrame(animateFloating); }
animateFloating();

/* particles follow cursor mildly */
document.addEventListener('mousemove', e=>{
  document.querySelectorAll('.particle').forEach((p,i)=>{
    const x = parseFloat(p.style.left), y = parseFloat(p.style.top);
    p.style.left = (x + (e.clientX - x) * (0.02 + (i%5)*0.005)) + 'px';
    p.style.top  = (y + (e.clientY - y) * (0.02 + (i%5)*0.005)) + 'px';
  });
});

/* ---------- Door interaction & typewriter ---------- */
function typeWriter(el,text,i=0){
  el.textContent = '';
  (function step(){
    if(i < text.length){ el.textContent += text.charAt(i++); setTimeout(step,80); } else { audio.play().catch(()=>{}); }
  })();
}
door.addEventListener('click', ()=>{
  door.style.transform = 'rotateY(90deg)';
  door.style.transition = 'transform 1s cubic-bezier(.2,.9,.3,1)';
  initialText.classList.add('visible');
  typeWriter(initialText, initialText.textContent);
  setTimeout(()=>{ mainContent.style.display='block'; // reveal
    // brief entrance animation
    mainContent.style.opacity=0; mainContent.style.transform='translateY(8px)';
    requestAnimationFrame(()=>{ mainContent.style.transition='opacity .8s, transform .8s'; mainContent.style.opacity=1; mainContent.style.transform='translateY(0)'; });
  },1400);
});

/* ---------- Crown assemble effect (simple) ---------- */
const crownMain = document.getElementById('crown-main');
(function crownAssemble(){
  // tiny particle burst then show crown (visual only)
  crownMain.style.opacity=0; crownMain.style.transform='scale(.6)';
  setTimeout(()=>{ crownMain.style.transition='opacity 900ms cubic-bezier(.2,.9,.3,1), transform 900ms'; crownMain.style.opacity=1; crownMain.style.transform='scale(1)'; }, 2200);
})();

/* ---------- Countdown ---------- */
const eventDate = new Date("November 23, 2025 13:00:00").getTime();
function updateCountdown(){
  const now = Date.now();
  const diff = eventDate - now;
  if(diff <= 0){ countdownEl.textContent = "¬°Hoy es la fiesta! üéâ"; return; }
  const d = Math.floor(diff/(1000*60*60*24));
  const h = Math.floor((diff%(1000*60*60*24))/(1000*60*60));
  const m = Math.floor((diff%(1000*60*60))/(1000*60));
  const s = Math.floor((diff%(1000*60))/1000);
  countdownEl.textContent = `‚è∞ ${d}d ${h}h ${m}m ${s}s`;
}
updateCountdown(); setInterval(updateCountdown,1000);

/* ---------- RSVP handling: WhatsApp + ICS calendar ---------- */
const rsvpForm = document.getElementById('rsvp-form');
rsvpForm.addEventListener('submit', function(ev){
  ev.preventDefault();
  const name = this.name.value.trim();
  const guests = parseInt(this.guests.value,10);
  if(!name || name.length<3){ alert('Ingresa tu nombre (m√≠nimo 3 letras)'); return; }
  if(!guests || guests<1 || guests>3){ alert('Ingresa total de personas (1-3)'); return; }

  // Save locally (in memory) and update admin view
  confirmations.push({name, guests, date:new Date().toISOString()});
  adminList.innerText = confirmations.map((c,i)=>`${i+1}. ${c.name} ‚Äî ${c.guests} personas`).join('\n');

  // WhatsApp prefilled message (Mexico country code 52)
  const phone = '522221012336';
  const waMsg = `Confirmaci%C3%B3n%20de%20asistencia%20-%20Ailany%0ANombre:%20${encodeURIComponent(name)}%0APersonas:%20${guests}`;
  window.open(`https://wa.me/${phone}?text=${waMsg}`, '_blank');

  // Create ICS for event (add to guest calendar)
  const start = new Date("November 23, 2025 13:00:00");
  const end = new Date("November 23, 2025 16:00:00");
  function toICSDate(d){ return d.toISOString().replace(/-|:|\.\d+/g,''); }
  const ics =
`BEGIN:VCALENDAR
VERSION:2.0
BEGIN:VEVENT
DTSTART:${toICSDate(start)}
DTEND:${toICSDate(end)}
SUMMARY:Fiesta de Ailany - Confirmada
DESCRIPTION:Asistencia confirmada por ${name} ‚Äî ${guests} personas. Iglesia: Iglesia del Santo Entierro. Recepci√≥n: Sal√≥n Jard√≠n Joss Mary.
LOCATION:Iglesia del Santo Entierro / Sal√≥n Jard√≠n Joss Mary
END:VEVENT
END:VCALENDAR`;
  const blob = new Blob([ics], {type:'text/calendar'});
  const link = document.createElement('a');
  link.href = URL.createObjectURL(blob);
  link.download = 'AilanyFiesta.ics';
  document.body.appendChild(link);
  link.click();
  link.remove();

  alert('¬°Gracias! Se ha enviado la confirmaci√≥n por WhatsApp y se descarg√≥ un archivo .ics para tu calendario.');
  this.reset();
});

/* ---------- No asistir√© ---------- */
document.getElementById('no-attend').addEventListener('click', ()=>{
  if(confirm('¬øConfirmas que NO asistir√°s?')){ alert('Gracias por avisar. Te mandamos un abrazo.'); }
});

/* ---------- Photo reminder: create ICS reminder for photos ---------- */
document.getElementById('photo-reminder').addEventListener('click', ()=>{
  const now = new Date();
  // set reminder same day at 3:30pm (example) as the photo reminder ‚Äî user can edit
  const remindStart = new Date("November 23, 2025 15:30:00");
  const remindEnd = new Date("November 23, 2025 16:00:00");
  function toICS(d){ return d.toISOString().replace(/-|:|\.\d+/g,''); }
  const ics =
`BEGIN:VCALENDAR
VERSION:2.0
BEGIN:VEVENT
DTSTART:${toICS(remindStart)}
DTEND:${toICS(remindEnd)}
SUMMARY:Recordatorio - Tomar fotos en la fiesta de Ailany
DESCRIPTION:No olvides tomar fotos en la fiesta üì∏
END:VEVENT
END:VCALENDAR`;
  const blob = new Blob([ics], {type:'text/calendar'});
  const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = 'RecordatorioFotos.ics'; document.body.appendChild(a); a.click(); a.remove();
  alert('Recordatorio descargado. √Åbrelo para a√±adirlo a tu calendario.');
});

/* ---------- Admin hidden: triple click title to toggle ---------- */
let clicks=0;
title.addEventListener('click', ()=>{
  clicks++; setTimeout(()=>{ clicks=0 },600);
  if(clicks===3){ adminPanel.style.display = adminPanel.style.display==='block' ? 'none' : 'block'; }
});

/* ---------- Export CSV (admin) ---------- */
document.getElementById('export-csv').addEventListener('click', ()=>{
  if(!confirmations.length){ alert('No hay confirmaciones'); return; }
  const rows = [['Nombre','Personas','Fecha']];
  confirmations.forEach(c=>rows.push([c.name,c.guests,c.date]));
  const csv = rows.map(r=>r.map(cell=>`"${(cell+'').replace(/"/g,'""')}"`).join(',')).join('\n');
  const blob = new Blob([csv], {type:'text/csv'});
  const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = 'confirmaciones.csv'; document.body.appendChild(a); a.click(); a.remove();
});

/* ---------- small accessibility: allow Enter to open door via keyboard ---------- */
door.setAttribute('tabindex','0');
door.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' ') door.click(); });

</script>
</body>
</html>
